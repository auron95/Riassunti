\section{Coefficienti matriciali}\label{sec:MatEl}
	In questa sezione ridimostreremo molti fatti senza utilizzare la teoria dei caratteri, ma utilizzando i coefficienti matriciali.
	
	\begin{mydef}
		Sia $\rho$ una rappresentazione di $G$ su $V_\rho$. Sia $\mathcal B$ una base di $V_\rho$, e sia $[\rho_g]$ la matrice associata a $\rho_g$ in base $\cB$.
		
		Si dice \myname{coefficiente matriciale} di posto $i,j$ l'applicazione da $G$ in $\mathbb C$ che associa a un elemento del gruppo la componente $[\rho_g]_i^j$.
		
		Lo spazio generato da queste funzioni si dice \myname{spazio dei coefficienti matriciali} e si indica con $\mathcal M(\rho)$.
	\end{mydef}
	
	Per come sono definiti, lo spazio dei coefficienti matriciali dipende dalla base, ma vedremo che in realtà non è così.
	
	Innanzitutto $\cM(\rho) \subseteq \func G$, quindi potremmo farci agire $G$ come per la rappresentazione regolare. Quello che invece faremo sarà usare una rappresentazione di $G\times G$:
	
	\begin{mydef}
		Si dice rappresentazione regolare \emph{bilatera} di $G$ la rappresentazione di $G \times G$ su $\func G$ data da
		\[
			\BReg_{(h_1,h_2)}f = g \mapsto f(h_2\inv g h_1)
		\]
		
		Alternativamente, se pensassimo $\func G$ come $\bC[G]$, scriveremmo
		\[
			(h_1,h_2)\cdot g = h_2gh_1\inv
		\]

	\end{mydef}
	Per convincersi che bisogna definirla così basta prendere $f\in\func G$ che vale $1$ applicata a $g$ e $0$ altrove, applicare $(h_1,h_2)$, e scoprire che ho ottenuto una funzione che vale $1$ solo in $h_2gh_1\inv$.
	
	Quindi, sappiamo che $\cM(\rho)$ è un sottospazio di $\func G$: sarà anche $G\times G$-invariante (ossia una sottorappresentazione)? La risposta sarà sì, e lo dimostreremo tra poco

	Sia ora $\rho$ una rappresentazione su $V$, e consideriamo lo spazio degli endomorfismi da $V$ in $V$. Su di esso sappiamo che possiamo far agire $G$ come abbiamo fatto sugli omomorfismi, ossia moltiplicando per $g\inv$ sullo spazio di partenza e per $g$ in quello di arrivo. Tuttavia anche qui ci facciamo agire $G\times G$ e otteniamo una rappresentazione $\tau$ data da
	\[
		\tau_{(g,h)} (\phi) = \rho_g \circ \phi \circ \rho_h\inv
	\]
	Cioè moltiplico per $h\inv$ in partenza e per $g$ in arrivo. \`E un caso particolare del prodotto tensore tra rappresentazioni (definizione \ref{def:TensProdRepr}).
	
	Definiamo l'applicazione $\mu: \End \rar \func G$ che manda un endomorfismo $\xi$ nella mappa $g\mapsto \Tr(\xi\circ\rho_g)$.

	Chi è l'immagine? Scrivendo in base ottengo che sono gli elementi della forma
	\[
		\sum_{i,j} [C]_i^j[\rho_g]_j^i
	\]
	che non sono nient'altro che le combinazioni lineari dei $[\rho_g]_i^j$, cioè $\cM(\rho)$. Quindi $\mu$ è un omomorfismo suriettivo tra $\End(V)$ e $\cM(\rho)$.
	
	\begin{myprop}
		$\cM(\rho)$ è una sottorappresentazione di $\BReg$ (ossia è stabile per $G\times G$). Inoltre $\mu$ è un omomorfismo di rappresentazioni tra $\End (V)$ e $\cM(\rho)$ (sempre con l'azione bilatera).		 
	\end{myprop}

	\begin{proof}
		Prendiamo un generico elemento di $\cM(\rho)$, che sappiamo che si può scirvere come $\mu(\xi)$ per qualche $\xi\in\End(V)$. Applico la definizione e ottengo
		\begin{align*}
			(h_1,h_2)\cdot \mu (\xi) &= \Tr(\xi \circ \rho_{h_2\inv gh_1})\\
															&= \Tr(\rho_{h_1} \circ \xi \circ \rho_{h_2} \circ \rho_g)\\
															&= \Tr((h_1,h_2)\cdot \xi)\rho)
															&= \mu((h_1,h_2)\cdot \xi)
		\end{align*}
		Dove come al solito la prima moltiplicazione per $(h_1,h_2)$ è quella data dall'azione di $\BReg$, mentre quella finale è data dalla rappresentazione bilatera sugli endomorfismi. Nel conto ho anche usato che $\Tr(AB)=\Tr(BA)$.
		
		Quindi abbiamo scoperto che ogni elemento della forma $\mu(\xi)$ viene mandato in un altro elemento della medesima forma, che significa per quanto abbiamo appena visto che $\cM(\rho)$ è $G\times G$-invariante. Inoltre la formula che abbiamo ottenuto ci dice esattamente che $\mu$ è un omomorfismo di rappresentazioni tra $\End$ e $\cM(\rho)$.
	\end{proof}
	
	\begin{mycor}
		Supponiamo che $\rho$ sia irriducibile. Allora $\mu$ è un isomorfismo tra $\End(V)$ e $\cM(\rho)$, e inoltre $\cM(\rho)$ è anch'essa irriducibile. 
	\end{mycor}
	\begin{proof}
		Sappiamo che $\End (V)$ è il prodotto tensoriale di due rappresentazioni irriducibili ($\rho \tensor \rho^*$), e quindi è irriducibile. Quindi per un lemma di Schur indebolito $\mu$ deve essere iniettiva (dato che non può essere nulla perché è anche suriettiva).
		
		La seconda parte della tesi è ora ovvia.
	\end{proof}
	
	Quindi ora conosciamo un po' di rappresentazioni irriducibili di $\BReg$. Vediamo di indagare meglio come sono fatte.
	
	\begin{myprop}
		Sia $\rho$ una rappresentazione su $V$, e sia $\rho^*$ la corrispondente rappresentazione su $V^*$. Allora
		\begin{itemize}
		 \item $\Res_{G\times \{e\}}^{G\times G}\cM(\rho) \isom n\rho$
		 \item $\Res_{\{e\}\times G}^{G\times G}\cM(\rho) \isom n\rho^*$
		\end{itemize}
		dove con $\Res_H^G$ indico la restrizione di una $G$-rappresentazione a un sottogruppo $H$ (definita nel modo ovvio).
	 
	\end{myprop}

	\begin{proof}
		Sia $I$ la rappresentazione banale su $V$, e sia $I^*$ la sua duale. 

		Consideriamo il prodotto di rappresentazioni (non quello tensoriale, ma quello definito in \ref{def:RapprProd}) dato da $\rho I^*$. Per definizione, questa è la $G$-rappresentazione su $V\tensor V*$ dove $G$ agisce solo su $V$ (perché su $V^*$ l'azione è quella banale). Quindi se noi restringiamo l'azione bilatera di $\rho \tensor \rho^*$ a $G \times \{e\}$, otteniamo precisamente $\rho I^*$, che è ovviamente isomorfa a $n\rho$. Per l'isomorfismo tra $\rho \tensor \rho^*$ e $\cM(\rho)$ concludiamo.
		
		L'altro punto è analogo.
	\end{proof}		
	
	\begin{myprop}
	 Siano $\rho$, $\sigma$ due $G$-rappresentazioni irriducibili non isomorfe. Allora le $G\times G$-rappresentazioni $\cM(\rho)$ e $\cM(\sigma)$ sono anch'esse non isomorfe.
	\end{myprop}
	
	\begin{proof}
	 Se fossero isomorfe, allora lo stesso varrebbe per le loro restrizioni a $G \times \{e\}$. Ma abbiamo visto che queste sono $n\rho \not\isom n\sigma$, assurdo.
	\end{proof}
	
	Quindi sappiamo che gli $\cM(\rho_i)$ al variare di $\rho_i$ tra le rappresentazioni irriducibili di $G$ sono linearmente indipendenti, ci rimane da sapere che generano effettivamente $\func G$. Possiamo procedere in due modi:
	
	\begin{itemize}
	 \item Nell'ordine seguito da questo riassunto, ora il fatto è banale: sappiamo che $\cM(\rho_i)$ ha dimensione $n_i^2$ (per l'isomorfismo con $\rho_i \tensor \rho_i^*$), e sappiamo che $\sum_i n_i^2 = \abs G$, e quindi per dimensioni abbiamo concluso.
	 \item Se invece non vogliamo usare la teoria sui caratteri, si può dare una dimostrazione alternativa.
	\end{itemize}
	
	\begin{myprop}\label{prop:MatElDirSum}
		Vale
		\[
			\bigoplus_i \cM(\rho_i) = \func G
		\]
		al variare di $\rho_i$ tra le rappresentazioni irriducibili di $G$.
	\end{myprop}
	\begin{proof}
		L'inclusione $\subseteq$ è ovvia.
		
		Consideriamo la rappresentazione regolare unilatera $\Reg$ (insomma, la $G$-rappresentazione solita). Consideriamo la base canonica di $\func G$ fatta dalle funzioni $f_g$ che valgono $1$ valutate in $g$ e $0$ altrove. Com'è fatto $[\Reg_h]_i^j$? Questo vale $1$ se e solo se $g_i\cdot h = g_j$: se fissiamo $g_i=e$ allora scopriamo che è esattamente $f_h$, ma per definizione questo è un coefficiente matriciale. Quindi $f_h\in \cM(\Reg)$. Ora chiaramente $\cM(\Reg) \subseteq \bigoplus_i \cM(\rho_i)$ (sto usando $\cM(\rho)+\cM(\sigma)=\cM(\rho+\sigma)$), e poiché abbiamo fatto federe che gli elementi della base di $\func G$ stanno nella somma, allora abbiamo dimostrato anche la $\supseteq$.
	\end{proof}
	
	\subsection{Funzioni classe}
		\begin{mydef}
			Chiamiamo $\cD$ la rappresentazione regolare diagonale, ossia la restrizione della regolare bilatera agli elementi di $G\times G$ della forma $(g,g)$.
		\end{mydef}
		Per definizione quindi le funzioni classe $\class G$ sono quelle funzioni in $\func G$ che vengono lasciate fisse dall'azione della \emph{diagonale}. 
		
		Siamo ora pronti per dimostrare che le rappresentazioni irriducibili sono tante quante le classi di coniugio.
		
		\begin{myprop}
			Sia $\class G$ lo spazio vettoriale delle funzioni classe, e sia $n$ il numero di rappresentazioni irriducibili di $G$. Allora $\dim \class G = n$.
		\end{myprop}
		\begin{proof}
			
			Prendiamo ora $f\in \class G$. In particolare $f$ sta in $\func G$, e quindi per la proposizione \ref{prop:MatElDirSum} possiamo scriverla come
			\[
			f= \sum_i f_i\qquad f_i \in \cM(\rho_i)
			\]
			dove al solito le $\rho_i$ sono le rappresentazioni irriducibili di $G$. Poiché $\cM(\rho_i)$ è stabile per $\BReg$, a maggior ragione lo sarà per $\cD$, e quindi $f$ è stabile per l'azione diagonale se e solo se sono stabili le $f_i$. Se indichiamo con $\cM(\rho)^\cD$ il sottospazio di $\cM(\rho)$ stabile per $\cD$, abbiamo quindi che
			\[
				\dim \class G = \sum_i \dim \cM(\rho_i)^\cD
			\]
			
			Indaghiamo ora come è fatto $\cM(\rho_i)^\cD$. Noi abbiamo dimostrato che $\cM(\rho_i)\isom \End(V_i)$ come spazio vettoriale: se ora mettiamo l'azione diagonale, gli endomorfismi stabili per $\cD$ sono precisamente gli endomorfismi di rappresentazione! Infatti, la rappresentazione $\cD$ su $\End(V_i)$ coincide precisamente con quella definita in $\ref{def:HomRepr}$, e avevamo visto che gli omomorfismi lasciati fissi da $G$ sono quelli di rappresentazione. Quindi, per il lemma di Schur, $\cM(\rho_i)^\cD$ ha dimensione $1$ (gli endomorfismi di rappresentazione di un'irriducibile differiscono per la moltiplicazione per uno scalare).
			
			Dunque
			\[
				\dim \class G = \sum_i 1 = n
			\]

		\end{proof}
		
		Dato che chiaramente la dimensione di $\class G$ è data dal numero di classi di coniugio di $G$, deduciamo che il numero di classi di coniugio di $G$ è uguale al numero di rapresentazioni irriducibili.
		
		\begin{myobs}
			Notiamo che il carattere $\chi_i$ di $\rho_i$ appartiene evidentemente a $\cM(\rho_i)$, dato che $\chi_i = \Tr(I\rho_i)$ per definizione. Quindi la retta di $\cM(\rho_i)$ stabile per $\cD$ è formata dai multipli di $\chi_i$.
		\end{myobs}


		
		



	
	



